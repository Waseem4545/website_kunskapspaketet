(this.webpackJsonpkunskapspaketet=this.webpackJsonpkunskapspaketet||[]).push([[0],{247:function(e,t,a){e.exports=a.p+"static/media/fullscreen_mode.89a5d4f2.png"},261:function(e,t,a){e.exports=a(488)},266:function(e,t,a){},419:function(e,t,a){},420:function(e,t,a){},421:function(e,t,a){},423:function(e,t,a){},424:function(e,t,a){},447:function(e,t,a){},488:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(29),l=a.n(s),i=(a(266),a(7)),o=a(8),c=a(10),u=a(9),m=a(40),d=a(15),h=a(11),p=a(18),f=a(13),b=a(31),g=(a(418),a(419),a(420),a(38)),v=a(6),E=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).login=n.login.bind(Object(v.a)(n)),n.handleChange=n.handleChange.bind(Object(v.a)(n)),n.signup=n.signup.bind(Object(v.a)(n)),n.state={email:"",password:"",msg:""},n}return Object(o.a)(a,[{key:"login",value:function(e){var t=this;e.preventDefault();var a=this.state,n=a.email,r=a.password;n.length>0&&r.length>0?this.props.firebase.login(this.state).catch((function(e){console.log("doSignInWithEmailAndPassword - err: ",e),t.errorHandle(e.code)})):this.setState({msg:"f\xe5r inte att logga in med tomma f\xe4lt"})}},{key:"signup",value:function(e){var t=this;e.preventDefault();var a=this.state,n=a.email,r=a.password;if(n.length>0&&r.length>0){var s={email:this.state.email,phoneNumber:"",name:"",role:"student"};this.props.firebase.createUser(this.state,s).catch((function(e){console.log("doCreateUserWithEmailAndPassword - err: ",e),t.errorHandle(e.code)}))}else this.setState({msg:"f\xe5r inte att registera dig med tomma f\xe4lt"})}},{key:"handleChange",value:function(e){this.setState(Object(g.a)({},e.target.name,e.target.value))}},{key:"errorHandle",value:function(e){"auth/wrong-password"===e&&this.setState({msg:"E-postadressen eller l\xf6senord felaktig"}),"auth/invalid-email"===e&&this.setState({msg:"E-postadressen \xe4r inte glitlig"}),"auth/user-not-found"===e&&this.setState({msg:"E-postadressen finns inte"}),"auth/email-already-in-use"===e&&this.setState({msg:"E-postadressen anv\xe4nds redan av ett annat konto."}),"auth/weak-password"===e&&this.setState({msg:"L\xf6senordet m\xe5ste vara minst 6 tecken"})}},{key:"render",value:function(){return r.a.createElement("div",{className:"row login"},r.a.createElement("div",{className:"col-md-6 login-form"},r.a.createElement("div",{className:"w-75 mx-auto"},r.a.createElement("p",{className:"bg-warning text-center",style:{fontSize:"13px"}},this.state.msg)),r.a.createElement("form",{action:""},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{value:this.state.email,type:"email",onChange:this.handleChange,id:"InputEmail",className:"form-control",name:"email",placeholder:"E-post"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{value:this.state.password,type:"password",onChange:this.handleChange,id:"InputPassword",className:"form-control",name:"password",placeholder:"L\xf6senord"})),r.a.createElement("div",{className:"w-100 d-flex flex-row justify-content-around  mx-auto my-3"},r.a.createElement("button",{onClick:this.signup,className:"btn btn-success btn-sm",name:"values"},"Registrera"),r.a.createElement("button",{type:"submit",onClick:this.login,className:"btn btn-primary btn-sm",name:"values"},"Logga in")))))}}]),a}(n.Component),y=Object(h.firebaseConnect)()(E),k=a(247),C=a.n(k),N=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).state={title:"V\xe4lkommen till kunskapspaketet "},e}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"container-fluid main-container"},r.a.createElement("div",{className:"banner"},r.a.createElement("div",{className:"banner-content"},r.a.createElement("h5",null,this.state.title),r.a.createElement("hr",null),r.a.createElement("p",null,"Lorem ipsum dolor sit amet consectetur adipisicing elit. Architecto est voluptas distinctio cum.")),r.a.createElement("div",{className:"banner-image"},r.a.createElement("img",{src:C.a,alt:""}))),r.a.createElement(y,null))}}]),a}(n.Component),w=(a(421),function(e){var t=e.lectures;return r.a.createElement("div",{className:"px-2"},r.a.createElement("div",{className:"categories-container"},t.map((function(e){return r.a.createElement(m.b,{className:"categories-item",key:e.id,style:{background:e.color},to:"/lecture/"+e.id},e.name)}))))}),O=function(e,t){if(!t)return!1;var a=t.pathname;return"/"===a||a.startsWith("/lecture")},S=function(e){var t=e.role;return r.a.createElement("div",{className:"mobile-navbar"},r.a.createElement(m.c,{exact:!0,activeClassName:"active",to:"/",isActive:O},r.a.createElement("i",{className:"fa fa-home fa-lg"})),("teacher"===t||"super_admin"===t)&&r.a.createElement(m.c,{exact:!0,activeClassName:"active",to:"/admin"},r.a.createElement("i",{className:"fa fa-users-cog"})),r.a.createElement(m.c,{exact:!0,activeClassName:"active",to:"/settings"},r.a.createElement("i",{className:"fa fa-user-circle fa-lg"})))},j=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){var e=this.props.profile,t=this.props.lectures;return r.a.createElement("div",null,r.a.createElement("div",{className:"container-fluid public-container"},r.a.createElement("div",{className:"welcome"},r.a.createElement("h6",{className:"text-white text-center py-3"},"V\xe4lkommen ",e.name?e.name:e.email)),t&&t.length>0&&r.a.createElement(w,{lectures:t}),r.a.createElement("div",{className:"row m-0 mt-4 px-2"},r.a.createElement("div",{className:"col-md-10 mx-auto px-0 pb-5"},r.a.createElement("h5",null,"instruktioner om hur eleverna kan anv\xe4nda kategorierna"),r.a.createElement("hr",{className:"my-2"}),r.a.createElement("p",null,"Lorem ipsum dolor sit amet consectetur adipisicing elit. Id recusandae commodi dolorem aperiam quibusdam, itaque temporibus nobis, praesentium, corrupti officiis debitis unde voluptate quaerat veritatis. Sed officiis nihil ipsum vitae!")))),r.a.createElement(S,{role:e.role}))}}]),a}(n.Component),x=Object(f.d)(Object(h.firebaseConnect)(),Object(h.firestoreConnect)((function(){return[{collection:"lectures",where:["isVisible","==",!0]}]})),Object(p.b)((function(e){return{profile:e.firebase.profile,lectures:e.firestore.ordered.lectures}})))(j),z=(a(423),a(424),function(e){var t=e.name,a=e.backLink,n=e.color,s=e.info;return r.a.createElement("div",{className:"topbar",style:{background:n||"#314f6f"}},r.a.createElement("h5",{className:"text-white m-0 w-100 position-relative"},a&&r.a.createElement(m.b,{to:a,className:"position-absolute back-button"},r.a.createElement("i",{className:"fa fa-arrow-left ml-4 fa-xs"})),t,s&&r.a.createElement("button",{className:"position-absolute info-button"},r.a.createElement("i",{className:"fa fa-info-circle mr-4 fa-xs"}))))}),q=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,null,[{key:"success",value:function(e){Object(b.c)(e,{type:b.c.TYPE.SUCCESS})}},{key:"error",value:function(e){Object(b.c)(e,{type:b.c.TYPE.ERROR})}},{key:"warning",value:function(e){Object(b.c)(e,{type:b.c.TYPE.WARNING})}},{key:"info",value:function(e){Object(b.c)(e,{type:b.c.TYPE.INFO})}}]),a}(n.Component),T=a(64),F=a.n(T),I=function(e){return r.a.createElement("ul",{className:"p-0"},Object.keys(e.data).map((function(t){return r.a.createElement("li",{key:t,className:"pl-3"},r.a.createElement("b",null,t,": ")," ",JSON.stringify(e.data[t]))})))},A=a(110),U=a(19),J=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={isOpened:e.visible},n.onButtonClick=n.onButtonClick.bind(Object(v.a)(n)),n.onClose=n.onClose.bind(Object(v.a)(n)),n.onConfirm=n.onConfirm.bind(Object(v.a)(n)),n}return Object(o.a)(a,[{key:"onButtonClick",value:function(){this.state.isOpened||this.setState({isOpened:!0})}},{key:"onClose",value:function(e){e&&e.stopPropagation(),this.setState({isOpened:!1}),"function"===typeof this.props.onClose&&this.props.onClose()}},{key:"onConfirm",value:function(e){e.stopPropagation(),this.setState({isOpened:!1}),this.props.onConfirm()}},{key:"render",value:function(){var e,t=this.props.showCancelButton?r.a.createElement(A.a,{className:"default",onClick:this.onClose},this.props.cancelText):null,a=r.a.createElement(U.a,{show:this.state.isOpened,onHide:this.onClose,className:this.props.className,dialogClassName:this.props.dialogClassName,keyboard:this.props.keyboard,backdrop:this.props.backdrop,enforceFocus:this.props.enforceFocus},r.a.createElement(U.a.Header,null,r.a.createElement(U.a.Title,null,this.props.title)),r.a.createElement(U.a.Body,null,this.props.body),r.a.createElement(U.a.Footer,null,t,r.a.createElement(A.a,{variant:"danger",className:this.props.confirmBSStyle,onClick:this.onConfirm},this.props.confirmText)));if(this.props.children){var n=r.a.Children.only(this.props.children);e=r.a.cloneElement(n,{onClick:this.onButtonClick,style:this.props.style},n.props.children,a)}else e=r.a.createElement(A.a,{variant:"danger",size:"sm",onClick:this.onButtonClick,style:this.props.style},this.props.buttonText,a);return e}}]),a}(n.Component);J.defaultProps={cancelText:"Cancel",confirmText:"Confirm",confirmBSStyle:"danger",showCancelButton:!0};var L=J,R=a(108),P=a.n(R),B="https://europe-west3-kunskapspaketet.cloudfunctions.net/widgets/user";function H(e){console.log("err: ",e),console.log(JSON.stringify(e)),q.error("N\xe5got gick fel: ".concat(e.message))}var V=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={show:!1,name:"",email:"",phoneNumber:"",password:""},n.handleShow=n.handleShow.bind(Object(v.a)(n)),n.handleClose=n.handleClose.bind(Object(v.a)(n)),n.handleStateUserChange=n.handleStateUserChange.bind(Object(v.a)(n)),n.save=n.save.bind(Object(v.a)(n)),n}return Object(o.a)(a,[{key:"handleShow",value:function(){this.setState({show:!0});var e=this.props.user;e&&this.setState(e)}},{key:"handleClose",value:function(){this.setState({show:!1})}},{key:"handleStateUserChange",value:function(e){this.setState(Object(g.a)({},e.target.name,e.target.value))}},{key:"save",value:function(e){var t=this;e.preventDefault();var a=this.props.user;if(a){var n={name:this.state.name,password:this.state.password,phoneNumber:this.state.phoneNumber};(function(e,t){return P.a.put("".concat(B,"/").concat(e),t)})(a.id,n).then((function(e){console.log("res : ",e),q.success("Eleven har uppdaterats: ".concat(t.state.email)),t.handleClose()})).catch((function(e){return H(e)}))}else{var r=this.props.firebase.auth().currentUser.uid;(function(e){return P.a.post("".concat(B),e)})({name:this.state.name,email:this.state.email,password:this.state.password,teacher:r,role:"student",phoneNumber:this.state.phoneNumber}).then((function(e){console.log("res : ",e),q.success("Eleven har skapats: ".concat(t.state.email)),t.handleClose()})).catch((function(e){return H(e)}))}}},{key:"render",value:function(){var e=this.state,t=e.show,a=e.name,n=e.email,s=e.phoneNumber,l=e.password,i=this.props.user;return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"btn btn-sm ".concat(i?"btn-warning text-white":"btn-primary"),onClick:this.handleShow},i?r.a.createElement(r.a.Fragment,null,r.a.createElement("i",{className:"fa fa-edit"})):r.a.createElement(r.a.Fragment,null,r.a.createElement("i",{className:"fa fa-plus"}))),r.a.createElement(U.a,{show:t,backdrop:"static",keyboard:!1,onHide:this.handleClose},r.a.createElement(U.a.Header,null,r.a.createElement(U.a.Title,null,i?"Editera anv\xe4ndare":"Skapa anv\xe4ndare")),r.a.createElement(U.a.Body,null,r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Namn"),r.a.createElement("input",{type:"text",className:"form-control",name:"name",value:a,onChange:this.handleStateUserChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"E-post"),r.a.createElement("input",{type:"email",className:"form-control",disabled:!!i,name:"email",value:n,onChange:this.handleStateUserChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Telenummer"),r.a.createElement("input",{type:"text",className:"form-control",name:"phoneNumber",value:s,onChange:this.handleStateUserChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"L\xf6senord"),r.a.createElement("input",{type:"password",className:"form-control",name:"password",value:l,onChange:this.handleStateUserChange})))),r.a.createElement(U.a.Footer,null,r.a.createElement("button",{className:"btn btn-secondary",onClick:this.handleClose},"St\xe4ng"),r.a.createElement("button",{className:"btn btn-success",onClick:this.save},"Spara"))))}}]),a}(n.Component),D=Object(f.d)(Object(h.firebaseConnect)())(V),_=a(492),Q=a(493),K=a(491),M=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={show:!1,quizzes:null},n.handleShow=n.handleShow.bind(Object(v.a)(n)),n.handleClose=n.handleClose.bind(Object(v.a)(n)),n}return Object(o.a)(a,[{key:"handleShow",value:function(){var e=this;this.setState({show:!0}),this.props.firestore.collection("users").doc(this.props.user.id).collection("quizzes").get().then((function(t){var a=[];t.docs.forEach((function(e){a.push(e.data())})),a.forEach((function(e){e.userInput.forEach((function(e){"object"===typeof e&&(e=Object.assign([],e))}))})),a.forEach((function(e){e.userInput=e.userInput.map((function(e){return"object"===typeof e&&(e=Object.assign([],e)),e}))})),e.setState({quizzes:a})}))}},{key:"handleClose",value:function(){this.setState({show:!1});var e=this.props.firestore,t=this.props.userUid,a=this.props.user;a.teacherCheck&&a.teacher===t&&e.collection("users").doc(a.id).update({teacherCheck:!1}).then((function(){})).catch((function(e){return H(e)}))}},{key:"render",value:function(){var e=this.state,t=e.show,a=e.quizzes,n=this.props.user,s=function(e,t,a){return"object"===typeof t?t.includes(a)?t.includes(a)?"bg-success text-white":"bg-danger text-white":e.includes(a)?"bg-danger text-white":"":parseInt(t)===a?"bg-success text-white":parseInt(e)===a?"bg-danger text-white":""};return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"btn btn-info btn-sm",onClick:this.handleShow},r.a.createElement("span",{className:"fa-stack",style:{fontSize:"0.875rem",height:"1rem",lineHeight:"1rem",width:"1.5rem"}},r.a.createElement("i",{className:"fa fa-file-alt fa-stack-1x"}),n.teacherCheck&&r.a.createElement("i",{className:"fa fa-bell fa-stack-1x text-danger",style:{left:"auto",right:"-5px",top:"-5px"}}))),r.a.createElement(U.a,{show:t,backdrop:"static",keyboard:!1,onHide:this.handleClose},r.a.createElement(U.a.Header,null,"Quiz svar f\xf6r ",n.name?n.name:n.email),r.a.createElement(U.a.Body,null,r.a.createElement("pre",null,JSON.stringify(n,null,2)),(null===a||void 0===a?void 0:a.length)>0?r.a.createElement(r.a.Fragment,null,r.a.createElement(_.a,null,a.map((function(e,t){return r.a.createElement(Q.a,{key:e.quizTitle},r.a.createElement(Q.a.Header,{style:{padding:"0"}},r.a.createElement(_.a.Toggle,{as:A.a,variant:"link",eventKey:t,className:"w-100 text-left"},e.quizTitle," - ",function(e){var t=new Date(e);return"".concat(t.getFullYear(),"/").concat(("0"+(t.getMonth()+1)).slice(-2),"/").concat(("0"+t.getDate()).slice(-2)," ").concat(t.getHours(),":").concat(t.getMinutes())}(e.quizSubmitted)," - ",e.numberOfCorrectAnswers," av"," ",e.numberOfQuestions," r\xe4tt")),r.a.createElement(_.a.Collapse,{eventKey:t},r.a.createElement(Q.a.Body,{style:{padding:"8px"}},e.questions.map((function(a,l){return r.a.createElement("div",{key:"".concat(t,"+").concat(a.question)},0===l&&r.a.createElement("div",null,n.name?n.name:n.email," fick ",e.numberOfCorrectAnswers," av"," ",e.numberOfQuestions," fr\xe5gor r\xe4tt"),r.a.createElement("br",null),r.a.createElement("h6",{className:"text-secondary"},r.a.createElement("p",null,"Q",l+1,": ",a.question),r.a.createElement("span",{className:"badge py-2 px-3 text-white ".concat("multiple"===a.answerSelectionType?"badge-warning":"badge-primary")},"multiple"===a.answerSelectionType?"Flerval":"Ett val"),r.a.createElement("span",{className:"badge py-2 px-3 ml-1 text-white",style:{background:"#673AB7"}},"V\xe4lj ",a.correctAnswer.length)),r.a.createElement(K.a,{as:"ul"},a.answers.map((function(t,n){return r.a.createElement(K.a.Item,{as:"li",key:t,className:s(e.userInput[l],a.correctAnswer,n+1)},t)}))))})))))})))):r.a.createElement("h4",null,"Har inte gjort n\xe5got quiz \xe4nnu")),r.a.createElement(U.a.Footer,null,r.a.createElement("button",{className:"btn btn-secondary",onClick:this.handleClose},"St\xe4ng"))))}}]),a}(n.Component),W=Object(f.d)(Object(h.firestoreConnect)(),Object(p.b)((function(e){return{userUid:e.firebase.auth.uid}})))(M);Object(T.createTheme)("solarized",{text:{primary:"#00000",secondary:"#2aa198"},background:{default:"#eee"},context:{background:"#eee",text:"#000000"},divider:{default:"#073642"},action:{button:"rgba(0,0,0,.54)",hover:"rgba(0,0,0,.08)",disabled:"rgba(0,0,0,.12)"}});var Y=function(e){var t=e.users,a=[],n=[{name:"Roll",selector:"role",sortable:!0,width:"50px",style:{color:"#ffffff"},conditionalCellStyles:[{when:function(e){return"teacher"===e.role},style:{backgroundColor:"#4299e1"}},{when:function(e){return"student"===e.role},style:{backgroundColor:"#48bb78"}},{when:function(e){return"super_admin"===e.role},style:{backgroundColor:"#EBB035"}}],cell:function(e){return r.a.createElement("div",{className:"w-100 text-center"},"teacher"===e.role?"T":"super_admin"===e.role?"SA":"S")}},{name:"Namn",selector:"name",sortable:!0,hide:"sm"},{name:"E-post",selector:"email",sortable:!0},{name:"Telenummer",selector:"phoneNumber",sortable:!0,hide:"sm"},{name:"Actions",sortable:!1,style:{padding:"0"},cell:function(t){return r.a.createElement("div",null,"super_admin"!==t.role&&r.a.createElement(r.a.Fragment,null,"student"===t.role&&r.a.createElement(W,{user:t}),r.a.createElement(D,{user:t}),r.a.createElement(L,{onConfirm:function(){e.deleteUser(t.id)},body:"\xc4r du s\xe4ker du vill radera: "+t.email,title:"Radera anv\xe4ndare",confirmText:"Radera",cancelText:"Avbryt",buttonText:r.a.createElement("i",{className:"fa fa-trash"})})))}}];return t.forEach((function(e){a.push({email:e.email,phoneNumber:e.phoneNumber,name:e.name,role:e.role,id:e.id,teacherCheck:e.teacherCheck,teacher:e.teacher})})),r.a.createElement("div",{className:"userTable mt-3"},r.a.createElement("h5",{className:"m-0 pb-0 pt-2 px-2",style:{background:"#eeeeee"}},"Anv\xe4ndare ",r.a.createElement(D,null)),r.a.createElement(F.a,{noHeader:!0,columns:n,theme:"solarized",data:a,pagination:!0,paginationPerPage:10,expandableRows:!0,expandableRowsComponent:r.a.createElement(I,{data:a.data})}))},G=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={show:!1,id:"",category:"",color:"",info:"",isVisible:!0,videoUrl:"",links:null,quizzes:[]},n.handleShow=n.handleShow.bind(Object(v.a)(n)),n.handleClose=n.handleClose.bind(Object(v.a)(n)),n.handleChange=n.handleChange.bind(Object(v.a)(n)),n.save=n.save.bind(Object(v.a)(n)),n}return Object(o.a)(a,[{key:"handleShow",value:function(){var e=this;this.setState({show:!0});var t=this.props,a=t.lecture,n=t.firestore;a&&(this.setState(a),n.collection("lectures").doc(a.id).collection("quiz").get().then((function(t){t.docs.forEach((function(t){var a=e.state.quizzes.concat(t.data());a.forEach((function(e){e.questions.forEach((function(e){e.correctAnswer=Object.assign([],e.correctAnswer),e.correctAnswer=e.correctAnswer.map((function(e){return parseInt(e)})),e.answers=e.answers.map((function(t,a){return{answer:t,isCorrect:e.correctAnswer.includes(a+1)}}))}))})),e.setState({quizzes:a})}))})))}},{key:"handleClose",value:function(){this.setState({show:!1})}},{key:"handleChange",value:function(e){this.setState(Object(g.a)({},e.target.name,e.target.value))}},{key:"headingChange",value:function(e,t){var a=JSON.parse(JSON.stringify(this.state.links));a[e].heading=t.target.value,this.setState({links:a})}},{key:"itemChange",value:function(e,t,a){var n=JSON.parse(JSON.stringify(this.state.links));n[e].items[t]=a.target.value,this.setState({links:n})}},{key:"addLink",value:function(e){e.preventDefault();var t=JSON.parse(JSON.stringify(this.state.links));t.push({heading:"",items:[]}),this.setState({links:t})}},{key:"addItem",value:function(e,t){t.preventDefault();var a=JSON.parse(JSON.stringify(this.state.links));a[e].items.push(""),this.setState({links:a})}},{key:"quizChange",value:function(e,t){var a=JSON.parse(JSON.stringify(this.state.quizzes));a[e][t.target.name]=t.target.value,this.setState({quizzes:a})}},{key:"questionChange",value:function(e,t,a){var n=JSON.parse(JSON.stringify(this.state.quizzes));n[e].questions[t].question=a.target.value,this.setState({quizzes:n})}},{key:"answerChange",value:function(e,t,a,n){var r=JSON.parse(JSON.stringify(this.state.quizzes));"isCorrect"===n.target.name?r[e].questions[t].answers[a].isCorrect="true"!==n.target.value:r[e].questions[t].answers[a][n.target.name]=n.target.value,this.setState({quizzes:r})}},{key:"addQuizQuestion",value:function(e,t){t.preventDefault();var a=JSON.parse(JSON.stringify(this.state.quizzes));a[e].questions.push({question:"",questionType:"text",point:"10",correctAnswer:1,messageForIncorrectAnswer:"Fel svar, F\xf6rs\xf6k igen.",messageForCorrectAnswer:"R\xe4tt svar, bra jobbat.",answerSelectionType:"single",answers:[{answer:"",isCorrect:!0},{answer:"",isCorrect:!1},{answer:"",isCorrect:!1},{answer:"",isCorrect:!1}]}),this.setState({quizzes:a})}},{key:"save",value:function(e){var t=this;e.preventDefault();var a=this.props,n=a.lecture,r=a.firestore;if(n){var s={videoUrl:this.state.videoUrl,information:this.state.information,color:this.state.color,links:this.state.links},l=JSON.parse(JSON.stringify(this.state.quizzes));l.forEach((function(e){e.questions.forEach((function(e){var t=e.answers.map((function(e,t){return e.isCorrect?t+1:0})).filter((function(e){return e>0}));e.answerSelectionType=t.length>1?"multiple":"single",e.correctAnswer=t.length>1?t:t.toString(),e.answers=e.answers.map((function(e){return e.answer}))}))}));var i=r.batch();l.forEach((function(e){var t=r.collection("lectures").doc(n.id).collection("quiz").doc(e.quizId);i.update(t,e)}));var o=r.collection("lectures").doc(n.id);i.update(o,s),i.commit().then((function(){q.success("".concat(n.name," har uppdaterats")),t.setState({quizzes:[]}),t.handleClose()})).catch((function(e){return H(e)}))}else console.log("Create new category will be here")}},{key:"render",value:function(){var e=this,t=this.state,a=t.show,n=t.name,s=t.videoUrl,l=t.information,i=t.color,o=t.links,c=t.quizzes,u=this.props.lecture;return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"btn btn-sm ".concat(u?"btn-warning text-white":"btn-primary"),onClick:this.handleShow},u?r.a.createElement(r.a.Fragment,null,r.a.createElement("i",{className:"fa fa-edit"})):r.a.createElement(r.a.Fragment,null,r.a.createElement("i",{className:"fa fa-plus"}))),r.a.createElement(U.a,{show:a,backdrop:"static",keyboard:!1,onHide:this.handleClose},r.a.createElement(U.a.Header,null,r.a.createElement(U.a.Title,null,u?"Editera f\xf6rel\xe4sning":"Skapa f\xf6rel\xe4sning")),r.a.createElement(U.a.Body,null,r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Namn"),r.a.createElement("input",{type:"text",className:"form-control",disabled:!!u,name:"name",value:n,onChange:this.handleChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Video url"),r.a.createElement("input",{type:"text",className:"form-control",name:"videoUrl",value:s,onChange:this.handleChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Information"),r.a.createElement("textarea",{rows:"10",className:"form-control",name:"information",value:l,onChange:this.handleChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"F\xe4rg"),r.a.createElement("input",{type:"color",className:"form-control",name:"color",value:i,onChange:this.handleChange})),o&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h6",null,"Stycken",r.a.createElement("button",{className:"btn btn-success btn-sm ml-1",onClick:this.addLink.bind(this)},r.a.createElement("i",{className:"fa fa-plus"}))),r.a.createElement(_.a,null,o.map((function(t,a){return r.a.createElement(Q.a,{key:a},r.a.createElement(Q.a.Header,{className:"py-1 px-2"},r.a.createElement(_.a.Toggle,{as:A.a,variant:"link",eventKey:a,className:"w-100 text-left"},t.heading?t.heading:"--")),r.a.createElement(_.a.Collapse,{eventKey:a},r.a.createElement(Q.a.Body,{className:"px-3 py-2"},r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{type:"text",className:"form-control",name:"heading",value:t.heading,onChange:e.headingChange.bind(e,a)}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement(L,{onConfirm:function(){!function(t){var a=JSON.parse(JSON.stringify(e.state.links));a.splice(t,1),e.setState({links:a})}(a)},body:"\xc4r du s\xe4ker du vill radera: "+t.heading+" det h\xe4r kommer att radera stycket",title:"Radera stycke",confirmText:"Radera",cancelText:"Avbryt",buttonText:r.a.createElement("i",{className:"fa fa-trash"})})))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,r.a.createElement("h6",null,"Artiklar",r.a.createElement("button",{className:"btn btn-success btn-sm ml-1",onClick:e.addItem.bind(e,a)},r.a.createElement("i",{className:"fa fa-plus"})))),t.items.map((function(t,n){return r.a.createElement("div",{key:n,className:"input-group mb-1"},r.a.createElement("input",{type:"text",className:"form-control",name:"item",value:t,onChange:e.itemChange.bind(e,a,n)}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement(L,{onConfirm:function(){!function(t,a){var n=JSON.parse(JSON.stringify(e.state.links));n[t].items.splice(a,1),e.setState({links:n})}(a,n)},body:"\xc4r du s\xe4ker du vill radera: "+t,title:"Radera l\xe4nk",confirmText:"Radera",cancelText:"Avbryt",buttonText:r.a.createElement("i",{className:"fa fa-trash"})})))}))))))})))),c&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h6",{className:"mt-3"},"Quizzes"),r.a.createElement(_.a,null,c.map((function(t,a){return r.a.createElement(Q.a,{key:a},r.a.createElement(Q.a.Header,{className:"py-1 px-2"},r.a.createElement(_.a.Toggle,{as:A.a,variant:"link",eventKey:a,className:"w-100 text-left"},t.quizTitle?t.quizTitle:"--")),r.a.createElement(_.a.Collapse,{className:"p-2",eventKey:a},r.a.createElement("div",null,r.a.createElement("div",{className:"form-group d-none"},r.a.createElement("label",null,"quizId"),r.a.createElement("input",{type:"text",className:"form-control",defaultValue:t.quizId,disabled:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Quiz namn"),r.a.createElement("input",{type:"text",className:"form-control",name:"quizTitle",value:t.quizTitle,onChange:e.quizChange.bind(e,a)})),r.a.createElement("h6",null,"Fr\xe5gor",r.a.createElement("button",{className:"btn btn-success btn-sm ml-1",onClick:e.addQuizQuestion.bind(e,a)},r.a.createElement("i",{className:"fa fa-plus"}))),r.a.createElement(_.a,null,t.questions.map((function(t,n){return r.a.createElement(Q.a,{key:n},r.a.createElement(Q.a.Header,{className:"py-1 px-2"},r.a.createElement(_.a.Toggle,{as:A.a,variant:"link",eventKey:n,className:"w-100 text-left"},t.question?t.question:"--")),r.a.createElement(_.a.Collapse,{eventKey:n},r.a.createElement(Q.a.Body,{className:"px-3 py-2"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Fr\xe5ga"),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{type:"text",className:"form-control",name:"heading",value:t.question,onChange:e.questionChange.bind(e,a,n)}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement(L,{onConfirm:function(){!function(t,a){var n=JSON.parse(JSON.stringify(e.state.quizzes));n[t].questions.splice(a,1),e.setState({quizzes:n})}(a,n)},body:"\xc4r du s\xe4ker du vill radera: "+t.question+" det h\xe4r kommer att radera fr\xe5gan",title:"Radera fr\xe5gan",confirmText:"Radera",cancelText:"Avbryt",buttonText:r.a.createElement("i",{className:"fa fa-trash"})})))),r.a.createElement("h6",null,"Svar"),t.answers.map((function(t,s){return r.a.createElement("div",{key:s,className:"input-group mb-1"},r.a.createElement("input",{type:"text",className:"form-control",name:"answer",value:t.answer,onChange:e.answerChange.bind(e,a,n,s)}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("span",{className:"input-group-text"},r.a.createElement("input",{type:"checkbox",name:"isCorrect",value:t.isCorrect,checked:t.isCorrect,onChange:e.answerChange.bind(e,a,n,s)}))))})))))}))))))})))))),r.a.createElement(U.a.Footer,null,r.a.createElement("button",{className:"btn btn-secondary",onClick:this.handleClose},"St\xe4ng"),r.a.createElement("button",{className:"btn btn-success",onClick:this.save},"Spara"))))}}]),a}(n.Component);Object(T.createTheme)("solarized",{text:{primary:"#00000",secondary:"#2aa198"},background:{default:"#eee"},context:{background:"#eee",text:"#000000"},divider:{default:"#073642"},action:{button:"rgba(0,0,0,.54)",hover:"rgba(0,0,0,.08)",disabled:"rgba(0,0,0,.12)"}});var X=function(e){var t=e.lectures,a=[],n=[{name:"Kategori",selector:"name",sortable:!0,width:"200px",conditionalCellStyles:[{when:function(e){return!e.isVisible},style:{color:"rgba(0,0,0,.18)"}}]},{name:"Video url",selector:"videoUrl",sortable:!0,width:"200px",hide:"sm",conditionalCellStyles:[{when:function(e){return!e.isVisible},style:{color:"rgba(0,0,0,.18)"}}]},{name:"Information",selector:"information",sortable:!0,width:"300px",hide:"sm",conditionalCellStyles:[{when:function(e){return!e.isVisible},style:{color:"rgba(0,0,0,.18)"}}]},{name:"Actions",sortable:!1,style:{padding:"0"},cell:function(t){return r.a.createElement("div",null,r.a.createElement("button",{className:"btn btn-sm btn-info",onClick:function(){return e.toggleLecture(t)}},r.a.createElement("i",{className:"fa  fa-eye"})),r.a.createElement(G,{lecture:t,firestore:e.firestore}))},conditionalCellStyles:[{when:function(e){return!e.isVisible},style:{color:"rgba(0,0,0,.18)"}}]}];return t.forEach((function(e){a.push({id:e.id,information:e.information,videoUrl:e.videoUrl,name:e.name,color:e.color,isVisible:e.isVisible,links:e.links})})),r.a.createElement("div",{className:"lectureTable mt-3"},r.a.createElement("h5",{className:"m-0 pb-0 pt-2 px-2",style:{background:"#eeeeee"}},"F\xf6rel\xe4sningar"),r.a.createElement(F.a,{noHeader:!0,columns:n,theme:"solarized",data:a,pagination:!0,paginationPerPage:10,expandableRows:!0,expandableRowDisabled:function(e){return!e.isVisible},expandableRowsComponent:r.a.createElement(I,{data:a.data})}))},$=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.profile,n=t.lectures,s=t.users;return r.a.createElement("div",{className:"container admin"},r.a.createElement(z,{name:"super_admin"===a.role?"Administration":"L\xe4rare"}),r.a.createElement("div",{className:"navbar-margin"},s&&r.a.createElement(Y,{users:s,deleteUser:function(e){var t;(t=e,P.a.delete("".concat(B,"/").concat(t))).then((function(e){console.log("res: ",e),q.success(e.data)})).catch((function(e){return H(e)}))}}),"super_admin"===a.role&&n&&r.a.createElement(X,{lectures:n,toggleLecture:function(t){e.props.firebase.firestore().collection("lectures").doc(t.id).update({isVisible:!t.isVisible}).then((function(){var e="".concat(t.isVisible?"Inaktiverade":"Aktiverade"," ").concat(t.name);t.isVisible?q.warning(e):q.success(e)})).catch((function(e){return console.error("Error writing document: ",e)}))},firestore:this.props.firestore})),r.a.createElement(S,{role:a.role}))}}]),a}(n.Component),Z=Object(f.d)(Object(p.b)((function(e){return{profile:e.firebase.profile,lectures:e.firestore.ordered.lectures,users:e.firestore.ordered.users}})),Object(h.firebaseConnect)(),Object(h.firestoreConnect)((function(e){var t=e.firebase.auth().currentUser.uid,a=["lectures"];return"super_admin"===e.profile.role?a.push("users"):a.push({collection:"users",where:["teacher","==",t]}),a})))($),ee=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).logout=n.logout.bind(Object(v.a)(n)),n.update=n.update.bind(Object(v.a)(n)),n.handleChange=n.handleChange.bind(Object(v.a)(n)),n.state={name:n.props.profile.name||"",email:n.props.profile.email||"",role:n.props.profile.role||"",phoneNumber:n.props.profile.phoneNumber||"",password:""},n}return Object(o.a)(a,[{key:"logout",value:function(){this.props.firebase.logout()}},{key:"handleChange",value:function(e){this.setState(Object(g.a)({},e.target.name,e.target.value))}},{key:"update",value:function(e){e.preventDefault();var t=this.props.firebase,a={name:this.state.name,phoneNumber:this.state.phoneNumber};this.state.password&&(t.auth().currentUser.updatePassword(this.state.password),this.setState({password:""})),a&&t.updateProfile(a)}},{key:"render",value:function(){var e=this.props.profile;return r.a.createElement("div",null,r.a.createElement(z,{name:"Settings"}),r.a.createElement("div",{className:"container-fluid navbar-margin mt-2"},r.a.createElement("button",{onClick:this.logout,className:"btn btn-danger"},"Logga ut"),r.a.createElement("form",null,r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"name"},"Name"),r.a.createElement("input",{id:"name",className:"form-control",name:"name",type:"text",value:this.state.name,onChange:this.handleChange})),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{id:"email",className:"form-control",type:"text",name:"email",value:this.state.email,onChange:this.handleChange,disabled:!0})),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"role"},"Role"),r.a.createElement("input",{id:"role",className:"form-control",type:"text",name:"role",value:this.state.role,onChange:this.handleChange,disabled:!0})),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"phoneNumber"},"PhoneNumber"),r.a.createElement("input",{id:"phoneNumber",className:"form-control",type:"text",name:"phoneNumber",value:this.state.phoneNumber,onChange:this.handleChange})),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{id:"password",className:"form-control",type:"password",name:"password",value:this.state.password,onChange:this.handleChange})),r.a.createElement("button",{type:"submit",onClick:this.update,className:"btn btn-primary"},"Update"))),r.a.createElement(S,{role:e.role}))}}]),a}(n.Component),te=Object(f.d)(Object(h.firebaseConnect)(),Object(p.b)((function(e){return{profile:e.firebase.profile}})))(ee),ae=a(66),ne=a(257),re=a.n(ne),se=(a(447),function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={show:!1},n.handleShow=n.handleShow.bind(Object(v.a)(n)),n.handleClose=n.handleClose.bind(Object(v.a)(n)),n}return Object(o.a)(a,[{key:"handleShow",value:function(){this.setState({show:!0})}},{key:"handleClose",value:function(){this.setState({show:!1})}},{key:"render",value:function(){var e=this,t=this.state.show,a=this.props.quiz,n=Object.assign({},a,{appLocale:{landingHeaderText:"<questionLength> Fr\xe5gor",multipleSelectionTagText:"Flerval",nextQuestionBtn:"N\xe4sta",pickNumberOfSelection:"V\xe4lj <numberOfSelection>",question:"Fr\xe5ga",resultFilterAll:"Alla",resultFilterCorrect:"R\xe4tt",resultFilterIncorrect:"Fel",resultPageHeaderText:"Du har avslutat quizzen. Du fick <correctIndexLength> av <questionLength> fr\xe5gor r\xe4tt.",resultPagePoint:"Du fick <correctPoints> av <totalPoints> po\xe4ng.",singleSelectionTagText:"Ett val",startQuizBtn:"Starta quiz"}});return r.a.createElement("div",{className:"text-center"},r.a.createElement("button",{className:"btn btn-success",onClick:this.handleShow},"Starta quiz"),r.a.createElement(U.a,{show:t,backdrop:"static",keyboard:!1,onHide:this.handleClose},r.a.createElement(U.a.Body,null,r.a.createElement(re.a,{quiz:n,locale:this.quizLocale,onComplete:function(t){console.log("complete: ",t);var a=e.props,n=a.firestore,r=a.userUid,s=a.lectureId,l=a.quiz,i=Object.assign({},Object(ae.a)(Object(ae.a)({},t),{},{quizTitle:l.quizTitle}));i.userInput=i.userInput.map((function(e){return"object"===typeof e&&(e=Object.assign({},e)),e})),i.quizSubmitted=(new Date).toISOString();var o=n.batch(),c=n.collection("users").doc(r);o.update(c,{teacherCheck:!0});var u=n.collection("users").doc(r).collection("quizzes").doc(s);o.set(u,i),o.commit().then((function(){})).catch((function(e){return H(e)}))}})),r.a.createElement(U.a.Footer,null,r.a.createElement("button",{className:"btn btn-sm btn-danger",onClick:this.handleClose},r.a.createElement("i",{className:"fa fa-times"})))))}}]),a}(n.Component)),le=Object(f.d)(Object(h.firestoreConnect)(),Object(h.firebaseConnect)(),Object(p.b)((function(e){return{profile:e.firebase.profile,userUid:e.firebase.auth.uid}})))(se),ie=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){var e=this.props,t=e.profile,a=e.lecture,n=e.quizzes,s=function(e){return{__html:e}};return r.a.createElement("div",null,a&&r.a.createElement(r.a.Fragment,null,r.a.createElement(z,{name:a.name,backLink:"/",color:a.color}),r.a.createElement("div",{className:"container navbar-margin"},r.a.createElement("div",{className:"lecture mt-2"},r.a.createElement("iframe",{title:"vidoe",width:"100%",height:"200px",src:a.videoUrl}),r.a.createElement("p",{className:"text-14",dangerouslySetInnerHTML:s(a.information)}),a.links&&a.links.map((function(e){return r.a.createElement("div",{className:"text-14",key:e.heading},e.heading&&r.a.createElement("b",null,e.heading),r.a.createElement("ul",null,e.items.map((function(e){return r.a.createElement("li",{key:e,dangerouslySetInnerHTML:s(e)})}))))})),n&&n.map((function(e){return r.a.createElement(le,{key:e.quizId,quiz:e,lectureId:a.id})}))))),r.a.createElement(S,{role:t.role}))}}]),a}(n.Component),oe=Object(f.d)(Object(h.firestoreConnect)((function(e){return[{collection:"lectures"},{collection:"lectures",doc:e.match.params.lectureName.toLowerCase(),subcollections:[{collection:"quiz"}],storeAs:"quizzes"}]})),Object(p.b)((function(e,t){var a=t.match.params.lectureName.toLowerCase();return{profile:e.firebase.profile,lecture:e.firestore.ordered.lectures&&e.firestore.ordered.lectures.find((function(e){return e.id===a})),quizzes:e.firestore.ordered.quizzes}})))(ie),ce=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={user:null},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.firebase.auth().onAuthStateChanged((function(t){t?e.setState({user:t}):e.setState({user:null})}))}},{key:"render",value:function(){var e=this.props.profile;return r.a.createElement("div",{className:"app"},r.a.createElement(b.b,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,pauseOnHover:!0,closeButton:!1,transition:b.a}),Object(h.isLoaded)(e)&&r.a.createElement(m.a,null,r.a.createElement(d.a,{path:"/",exact:!0,component:e.email?x:N}),r.a.createElement(d.a,{path:"/settings",component:e.email?te:N}),r.a.createElement(d.a,{path:"/lecture/:lectureName",component:e.email?oe:N}),r.a.createElement(d.a,{path:"/admin",component:e.email?Z:N})))}}]),a}(n.Component),ue=Object(f.d)(Object(h.firebaseConnect)(),Object(h.firestoreConnect)(),Object(p.b)((function(e){return{profile:e.firebase.profile}})))(ce);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var me=a(163),de=a(109),he=a.n(de),pe=(a(482),a(484),a(258)),fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET DEFAULT LECTURES":return Object(ae.a)(Object(ae.a)({},e),[t]);default:return e}};he.a.initializeApp({apiKey:"AIzaSyCjN4obQGSoePw-wME_yA8JVx6kIzuRCwE",authDomain:"kunskapspaketet.firebaseapp.com",databaseURL:"https://kunskapspaketet.firebaseio.com",projectId:"kunskapspaketet",storageBucket:"kunskapspaketet.appspot.com",messagingSenderId:"1011354741666",appId:"1:1011354741666:web:fe999e52c5d62fedb420fb"}),he.a.firestore();var be=Object(f.c)({defaultLectures:fe,firebase:h.firebaseReducer,firestore:me.firestoreReducer}),ge=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||f.d,ve=Object(f.e)(be,ge(Object(f.a)(pe.a))),Ee={firebase:he.a,config:{userProfile:"users",useFirestoreForProfile:!0},dispatch:ve.dispatch,createFirestoreInstance:me.createFirestoreInstance};l.a.render(r.a.createElement(p.a,{store:ve},r.a.createElement(h.ReactReduxFirebaseProvider,Ee,r.a.createElement(ue,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[261,1,2]]]);
//# sourceMappingURL=main.5e4cfaa5.chunk.js.map